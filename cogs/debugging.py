import discord
from discord.ext import commands

import asyncio



class Debugging(commands.Cog):
    """Random stuff used during debugging."""

    def __init__(self, bot: commands.Bot):
        self.bot = bot


    @commands.command(name="test", hidden=True)
    @commands.is_owner()
    async def test(self, ctx: commands.Context):
        """Test some code..."""
        #-------------

        if ctx.message.attachment_count > 0:
            att = ctx.message.attachments[0]
            print(att.content_type)
            print(att.url)
            #att.to_file()
        else:
            print("no attachments")


        #-------------
        print("Ran debug function successfully!")
        await ctx.message.add_reaction("✅")
        
    @test.error
    async def testError(self, ctx: commands.Context, error: commands.CommandError):
        print("Debugging failed! Error:")
        print(error)
        await ctx.message.add_reaction("❌")
    
    #@commands.command(name="special", hidden=True)
    async def jokeCommand(self, ctx: commands.Context):
        banids = "6746205656443256833 919773115960152074 919773081046761522 919773068988137503 919773072599441478 919773066492518401 919773050071810079 919773043113484288 919773048771596389 919773043205767248 919773045231603712 919773006161662033 919773020510388255 919773003280166944 919773009995247646 919772986448429098 919772981822099476 919772980614135890 919772974280749128 919772980769337405 919772975706832927 919772943716868126 919772943511330856 919772938633355265 919772939304460348 919772939824554055 919772944236937246 919772942953488484 919772936779489370 919772939568697354 752810408833974353 919772940298498108 919772939413508136 919772934690717747 919772918102229012 919772883188863046 919772883893497887 919772873017671730 919772876196966440 919772859109371915 919772860350881802 919772845700165633 919772808282779689 919772802482073610 919772808807088179 919772801676750908 919772809637560361 919772806328246293 919772800519127040 919772783339241572 919772741035503646 919772744659386418 919772742558027838 919772735792623726 919772735708749854 919772737604583435 919772723524300820 919772720076558336 919772708202483742 919772690032783390 919772671934365716 919772709251059802 919772673024876625 919772646974042112 919772671548473364 919772672236355624 919772670202109982 919772642473570314 919772607673401364 919772609460199484 919772647196332082 919772617949474887 919772611033038868 919772590778748928 919772613524488235 919772613906161685 919772617605517313 919772433978884136 919772579324121179 919772533543297096 919772591760236545 919772590766170153 919772590514536468 919772591768621136 919772590900412481 919772603319717889 919772441880965220 919772581962342430 919772555743727616 919772536756133928 919772545111187507 919772508503298128 919772539822170164 919772505835708436 919772474915319828 919772507706372106 919772384502882324 919772508973056010 919772476043591710 919772474286153798 919772472356778014 576403847640252456 919772450009538570 919772468602896394 919772409349931078 919772406833381447 919772373522202715 919772357432852562 919772353255333959 919772349488832532 919772334716506252 919772329993699398 919772322813079563 919772272884060181 919772277971767357 919772279624310834 919772224595042335 919772206857347082 919772215979966536 919772274603724840 919772193083228170 919772144240570509 919772138783768626 919772143628189717 919772135952646146 919772138255298580 919772124250537994 919772115970981888 919772108857409557 919772095888625694 919772084278812786 919772075265241139 919772080256462868 919772081560903710 919772077597294732 919772061130457198 919772055057092638 919772074250211389 919772059805028384 919772061264654337 919772062057377813 919772060010557460 919772053928812546 919772052334977026 919772048283283536 919772043879272469 919772044017664060".split()
        for banid in banids:
            try:
                user = await self.bot.fetch_user(int(banid))
            except:
                user = False
            
            if user:
                try:
                    await user.send("You have been banned on the Minecraft@Home server for being part of a raid. If this was an accident, appeal here: https://discord.gg/9DwrQpH")
                    await asyncio.sleep(1)
                except:
                    print(f"can't dm {banid}")
                try:
                    await ctx.guild.ban(user, reason="raid")
                    print(f"banned {banid}")
                except:
                    print(f"failed {banid}")
            else:
                print(f"failed {banid}")

def setup(bot: commands.Bot):
    bot.add_cog(Debugging(bot))